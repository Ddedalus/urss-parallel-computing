Each agent is mapped to one node in an (undirected), unweighted graph.
Node agent knows all its neighbours
Let s denote a source node.

### Agent code

## init
Send to each neighbour: my order
Receive from each neighbour: their order
Set my distance = INF
s set distance = 0  # my current estimate
Set updating = (distance < INF) # are any messages due to be sent?

## run
for each incomming message:
    if new_distance < distance:
        distance = new_distance
        updating = true

if(updating):
    vote not to halt
    for each neighbour prioritized on their order:
     send my distance + 1
    updating = false
else:
    if(distance < INF):
        vote for halt
    else:
        sleep

## termination
everyone voted for halt